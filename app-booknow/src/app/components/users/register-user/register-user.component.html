<app-nav-bar></app-nav-bar>

<div class="container">
  <div class="register-user-container">
    <h2 tabindex="0">Cadastrar Usuário</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <div class="form-group">
        <label for="name">Nome *</label>
        <input type="text" id="name" formControlName="name" class="form-control" aria-required="true" aria-describedby="name-error" placeholder="Digite seu nome">
        <div *ngIf="submitted && registerForm.get('name')?.errors" id="name-error">
          <small *ngIf="registerForm.get('name')?.hasError('required')">Nome é obrigatório.</small>
          <small *ngIf="registerForm.get('name')?.hasError('minlength')">Nome deve ter no mínimo 3 caracteres.</small>
          <small *ngIf="registerForm.get('name')?.hasError('maxlength')">Nome deve ter no máximo 250 caracteres.</small>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input type="email" id="email" formControlName="email" class="form-control" aria-required="true" aria-describedby="email-error" placeholder="Digite seu email">
        <div *ngIf="submitted && registerForm.get('email')?.errors" id="email-error">
          <small *ngIf="registerForm.get('email')?.hasError('required')">Email é obrigatório.</small>
          <small *ngIf="registerForm.get('email')?.hasError('email')">Email inválido.</small>
        </div>
      </div>

      <div class="form-group">
        <label for="cpf">CPF *</label>
        <input type="text" id="cpf" formControlName="cpf" class="form-control" aria-required="true" aria-describedby="cpf-error" placeholder="Digite seu CPF (formato: xxx.xxx.xxx-xx)">
        <div *ngIf="submitted && registerForm.get('cpf')?.errors" id="cpf-error">
          <small *ngIf="registerForm.get('cpf')?.hasError('required')">CPF é obrigatório.</small>
          <small *ngIf="registerForm.get('cpf')?.hasError('pattern')">CPF inválido (use o formato: xxx.xxx.xxx-xx).</small>
        </div>
      </div>

      <div class="form-group">
        <label for="phoneNumber">Telefone</label>
        <input type="text" id="phoneNumber" formControlName="phoneNumber" class="form-control" placeholder="Digite seu telefone">
        <div *ngIf="submitted && registerForm.get('phoneNumber')?.errors" id="phoneNumber-error">
          <small *ngIf="registerForm.get('phoneNumber')?.hasError('pattern')">Telefone inválido.</small>
        </div>
      </div>

      <div class="form-group">
        <label for="address">Endereço</label>
        <input type="text" id="address" formControlName="address" class="form-control" placeholder="Digite seu endereço">
        <div *ngIf="submitted && registerForm.get('address')?.errors" id="address-error">
          <small *ngIf="registerForm.get('address')?.hasError('minlength')">Endereço deve ter no mínimo 10 caracteres.</small>
          <small *ngIf="registerForm.get('address')?.hasError('maxlength')">Endereço deve ter no máximo 250 caracteres.</small>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Senha *</label>
        <input type="password" id="password" formControlName="password" class="form-control" placeholder="Digite sua senha">
        <div *ngIf="submitted && registerForm.get('password')?.errors" id="password-error">
          <small *ngIf="registerForm.get('password')?.hasError('required')">Senha é obrigatória.</small>
          <small *ngIf="registerForm.get('password')?.hasError('pattern')">
            A senha deve ter pelo menos 8 caracteres, incluindo pelo menos uma letra maiúscula, uma letra minúscula, um número e um caractere especial.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmar Senha *</label>
        <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control" placeholder="Confirme sua senha">
        <div *ngIf="submitted && registerForm.get('confirmPassword')?.errors" id="confirmPassword-error">
          <small *ngIf="registerForm.get('confirmPassword')?.hasError('required')">Confirmação de senha é obrigatória.</small>
          <small *ngIf="registerForm.get('confirmPassword')?.hasError('notSame')">As senhas não coincidem.</small>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary" aria-label="Cadastrar" [disabled]="registerForm.invalid">Cadastrar</button>
      </div>

      <div *ngIf="successMessage" class="success-message" role="alert">{{ successMessage }}</div>

    </form>
    <div class="links">
      <a routerLink="/login">Já tenho uma conta. Fazer Login.</a>
    </div>
  </div>
</div>
